# Java并发编程实战读书笔记

异步任务举例：烤面包

同步任务举例：泡茶->烧水

线程安全性的定义中，最核心的概念就是***正确性***。

## 无状态

不包含任何的域，也不包含任何对其他类中域的引用。计算过程中的临时状态仅存在于线程栈上的局部变量中，并且只能由正在执行的线程访问。

<u>***无状态对象一定是线程安全的***</u>

> 补充概念：
>
> 什么是域？
>
> ​        域是一种属性，类的字段，全局的局部的都是。
>
> ​        分类：静态域（一个类中只有一个这样的域）、实例域（每一个对象对于所有的实例域都有自己的一份拷贝）

Final域

final类型的域不能修改。final域能确保初始化过程的安全性，从而可以不受限制的访问不可变对象，并在共享这些对象时无须同步。



## 设计线程安全的类

在设计线程安全类的过程中，需要包含以下三个基本要素：

- 找出构成对象状态的所有变量。
- 找出约束状态变量的不变性条件。
- 建立对象状态的并发访问管理策略。



## 并发容器

<u>***并发容器&&同步容器异同：***</u>

何为同步容器：可以简单的理解为通过synchronized来实现同步的容器，如果多个线程调动同步容器方法，它们将会串行执行。eg：Vector、Hashtable、Collections.synchronizedSet、synchronizedList。

并发容器：并发容器是针对多个线程并发访问设计的，在jdk5.0引入了concurrent包，eg：ConcurrenthashMap、CopyOnWriteArrayList等。并发容器使用了与同步容器完全不同的加锁策略来提高更高的并发性和伸缩性，eg：在ConcurrentHashMap中采用了一种粒度更细的加锁机制，可以成为分段锁，在这种锁机制下，允许任意数量的读线程并发地访问map，并且执行读操作的线程和写操作的线程也可以并发的访问map，同时允许一定数量的写操作线程并发地修改map，所以它可以在并发环境下实现更高的吞吐量。







JUC并发包讲解：

![JUC](https://github.com/Shengliannan/JDK_Learning/blob/master/img/Package%20concurrent.png?raw=true)

JUC包

```
package java.util.concurrent;
```

